(function(global){
'use strict';(function(d) {
  function f() {
  }
  function h() {
    return Math.round(Math.random() * Math.pow(16, 8)).toString(16);
  }
  function g(c) {
    return function(b) {
      console.error(b.message + "\n  at " + b.filename + ":" + b.lineno + ":" + b.colno);
      b.error && console.error(b.error.stack);
      console.info("(" + c + "}());".slice(0, 300) + "\n...");
    };
  }
  var k = d.WMIframeInserter || require("duxca.wmiframeinserter.js");
  f.createIframeWorker = function(c) {
    var b = "<script>(" + c + "());\x3c/script>", a = document.createElement("iframe");
    a.setAttribute("style", "position:absolute;top:0px;left:0px;width:0px;height:0px;border:0px;margin:0px;padding:0px;");
    var e = !1;
    a.addEventListener("load", function() {
      a.contentWindow.addEventListener("error", g(c));
      e = !0;
    });
    a.addEventListener("error", g(c));
    document.body.appendChild(a);
    (new k(a)).blobURL(b);
    return{load:function(a) {
      e ? setTimeout(a) : setTimeout(this.load.bind(this, a), 100);
    }, request:function(b, c) {
      var e = {data:b, session:h()};
      d.addEventListener("message", function l(a) {
        e.session === a.data.session && (d.removeEventListener("message", l), c(a.data.error, a.data.data));
      });
      a.contentWindow.postMessage(e, "*");
    }, terminate:function() {
      a.removeAttribute("src");
      a.removeAttribute("srcdoc");
      document.body.removeChild(a);
      a = null;
    }};
  };
  f.createWorker = function(c) {
    var b = URL.createObjectURL(new Blob(["(" + c + "());"], {type:"text/javascript"})), a = new Worker(b);
    a.addEventListener("error", g(c));
    return{load:function(a) {
      setTimeout(a);
    }, request:function(b, c) {
      var d = {data:b, session:h()};
      a.addEventListener("message", function m(b) {
        d.session === b.data.session && (a.removeEventListener("message", m), c(b.data.error, b.data.data));
      });
      a.postMessage(d);
    }, terminate:function() {
      a.terminate();
      a = null;
    }};
  };
  "process" in d && (module.exports = f);
  d["WMIframeWorker" in d ? "WMIframeWorker_" : "WMIframeWorker"] = f;
})((this || 0).self || global);

})((this||0).self||global);
